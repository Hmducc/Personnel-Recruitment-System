{"version":3,"sources":["PresenceGroup.js"],"sourcesContent":["import { _ as _class_private_field_get } from \"@swc/helpers/_/_class_private_field_get\";\nimport { _ as _class_private_field_init } from \"@swc/helpers/_/_class_private_field_init\";\nimport { _ as _class_private_field_set } from \"@swc/helpers/_/_class_private_field_set\";\nimport * as React from 'react';\nimport { getNextChildMapping } from '../utils/groups/getNextChildMapping';\nimport { getChildMapping } from '../utils/groups/getChildMapping';\nimport { PresenceGroupItemProvider } from './PresenceGroupItemProvider';\nvar _mounted = /*#__PURE__*/ new WeakMap(), _handleExit = /*#__PURE__*/ new WeakMap();\n/* eslint-disable @typescript-eslint/explicit-member-accessibility */ /* eslint-disable @typescript-eslint/naming-convention */ export class PresenceGroup extends React.Component {\n    static getDerivedStateFromProps(nextProps, { childMapping: prevChildMapping, firstRender }) {\n        const nextChildMapping = getChildMapping(nextProps.children);\n        return {\n            childMapping: firstRender ? nextChildMapping : getNextChildMapping(prevChildMapping, nextChildMapping),\n            firstRender: false\n        };\n    }\n    componentDidMount() {\n        _class_private_field_set(this, _mounted, true);\n    }\n    componentWillUnmount() {\n        _class_private_field_set(this, _mounted, false);\n    }\n    render() {\n        return /*#__PURE__*/ React.createElement(React.Fragment, null, Object.entries(this.state.childMapping).map(([childKey, childProps])=>/*#__PURE__*/ React.createElement(PresenceGroupItemProvider, {\n                ...childProps,\n                childKey: childKey,\n                key: childKey,\n                onExit: _class_private_field_get(this, _handleExit)\n            }, childProps.element)));\n    }\n    constructor(props, context){\n        super(props, context);\n        _class_private_field_init(this, _mounted, {\n            writable: true,\n            value: false\n        });\n        _class_private_field_init(this, _handleExit, {\n            writable: true,\n            value: (childKey)=>{\n                const currentChildMapping = getChildMapping(this.props.children);\n                if (childKey in currentChildMapping) {\n                    return;\n                }\n                if (_class_private_field_get(this, _mounted)) {\n                    this.setState((state)=>{\n                        const childMapping = {\n                            ...state.childMapping\n                        };\n                        delete childMapping[childKey];\n                        return {\n                            childMapping\n                        };\n                    });\n                }\n            }\n        });\n        this.state = {\n            childMapping: {},\n            firstRender: true\n        };\n    }\n}\n"],"names":["PresenceGroup","_mounted","WeakMap","_handleExit","React","Component","getDerivedStateFromProps","nextProps","childMapping","prevChildMapping","firstRender","nextChildMapping","getChildMapping","children","getNextChildMapping","componentDidMount","_class_private_field_set","componentWillUnmount","render","createElement","Fragment","Object","entries","state","map","childKey","childProps","PresenceGroupItemProvider","key","onExit","_class_private_field_get","element","constructor","props","context","_class_private_field_init","writable","value","currentChildMapping","setState"],"mappings":";;;;+BAQ6IA;;;eAAAA;;;;yCAR/F;0CACC;yCACD;iEACvB;qCACa;iCACJ;2CACU;AAC1C,IAAIC,WAAW,WAAW,GAAG,IAAIC,WAAWC,cAAc,WAAW,GAAG,IAAID;AAC2D,MAAMF,sBAAsBI,OAAMC,SAAS;IAC9K,OAAOC,yBAAyBC,SAAS,EAAE,EAAEC,cAAcC,gBAAgB,EAAEC,WAAW,EAAE,EAAE;QACxF,MAAMC,mBAAmBC,IAAAA,gCAAe,EAACL,UAAUM,QAAQ;QAC3D,OAAO;YACHL,cAAcE,cAAcC,mBAAmBG,IAAAA,wCAAmB,EAACL,kBAAkBE;YACrFD,aAAa;QACjB;IACJ;IACAK,oBAAoB;QAChBC,IAAAA,0BAAwB,EAAC,IAAI,EAAEf,UAAU;IAC7C;IACAgB,uBAAuB;QACnBD,IAAAA,0BAAwB,EAAC,IAAI,EAAEf,UAAU;IAC7C;IACAiB,SAAS;QACL,OAAO,WAAW,GAAGd,OAAMe,aAAa,CAACf,OAAMgB,QAAQ,EAAE,MAAMC,OAAOC,OAAO,CAAC,IAAI,CAACC,KAAK,CAACf,YAAY,EAAEgB,GAAG,CAAC,CAAC,CAACC,UAAUC,WAAW,GAAG,WAAW,GAAGtB,OAAMe,aAAa,CAACQ,oDAAyB,EAAE;gBAC1L,GAAGD,UAAU;gBACbD,UAAUA;gBACVG,KAAKH;gBACLI,QAAQC,IAAAA,0BAAwB,EAAC,IAAI,EAAE3B;YAC3C,GAAGuB,WAAWK,OAAO;IAC7B;IACAC,YAAYC,KAAK,EAAEC,OAAO,CAAC;QACvB,KAAK,CAACD,OAAOC;QACbC,IAAAA,2BAAyB,EAAC,IAAI,EAAElC,UAAU;YACtCmC,UAAU;YACVC,OAAO;QACX;QACAF,IAAAA,2BAAyB,EAAC,IAAI,EAAEhC,aAAa;YACzCiC,UAAU;YACVC,OAAO,CAACZ;gBACJ,MAAMa,sBAAsB1B,IAAAA,gCAAe,EAAC,IAAI,CAACqB,KAAK,CAACpB,QAAQ;gBAC/D,IAAIY,YAAYa,qBAAqB;oBACjC;gBACJ;gBACA,IAAIR,IAAAA,0BAAwB,EAAC,IAAI,EAAE7B,WAAW;oBAC1C,IAAI,CAACsC,QAAQ,CAAC,CAAChB;wBACX,MAAMf,eAAe;4BACjB,GAAGe,MAAMf,YAAY;wBACzB;wBACA,OAAOA,YAAY,CAACiB,SAAS;wBAC7B,OAAO;4BACHjB;wBACJ;oBACJ;gBACJ;YACJ;QACJ;QACA,IAAI,CAACe,KAAK,GAAG;YACTf,cAAc,CAAC;YACfE,aAAa;QACjB;IACJ;AACJ"}