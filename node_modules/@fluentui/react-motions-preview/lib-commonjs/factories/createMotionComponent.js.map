{"version":3,"sources":["createMotionComponent.js"],"sourcesContent":["import { useIsomorphicLayoutEffect, useMergedRefs } from '@fluentui/react-utilities';\nimport * as React from 'react';\nimport { useIsReducedMotion } from '../hooks/useIsReducedMotion';\nimport { useMotionImperativeRef } from '../hooks/useMotionImperativeRef';\nimport { animate } from '../utils/animate';\nimport { getChildElement } from '../utils/getChildElement';\n/**\n * Creates a component that will animate the children using the provided motion.\n *\n * @param motion - A motion definition.\n */ export function createMotionComponent(motion) {\n    const Atom = (props)=>{\n        const { children, iterations = 1, imperativeRef } = props;\n        const child = getChildElement(children);\n        const animationRef = useMotionImperativeRef(imperativeRef);\n        const elementRef = React.useRef();\n        const isReducedMotion = useIsReducedMotion();\n        useIsomorphicLayoutEffect(()=>{\n            const element = elementRef.current;\n            if (element) {\n                const definition = typeof motion === 'function' ? motion(element) : motion;\n                const { keyframes, ...options } = definition;\n                const animation = animate(element, keyframes, {\n                    fill: 'forwards',\n                    ...options,\n                    iterations,\n                    ...isReducedMotion() && {\n                        duration: 1\n                    }\n                });\n                if (!animation) {\n                    return;\n                }\n                animationRef.current = animation;\n                return ()=>{\n                    animation.cancel();\n                };\n            }\n        }, [\n            animationRef,\n            iterations,\n            isReducedMotion\n        ]);\n        return React.cloneElement(children, {\n            ref: useMergedRefs(elementRef, child.ref)\n        });\n    };\n    return Atom;\n}\n"],"names":["createMotionComponent","motion","Atom","props","children","iterations","imperativeRef","child","getChildElement","animationRef","useMotionImperativeRef","elementRef","React","useRef","isReducedMotion","useIsReducedMotion","useIsomorphicLayoutEffect","element","current","definition","keyframes","options","animation","animate","fill","duration","cancel","cloneElement","ref","useMergedRefs"],"mappings":";;;;+BAUoBA;;;eAAAA;;;;gCAVqC;iEAClC;oCACY;wCACI;yBACf;iCACQ;AAKrB,SAASA,sBAAsBC,MAAM;IAC5C,MAAMC,OAAO,CAACC;QACV,MAAM,EAAEC,QAAQ,EAAEC,aAAa,CAAC,EAAEC,aAAa,EAAE,GAAGH;QACpD,MAAMI,QAAQC,IAAAA,gCAAe,EAACJ;QAC9B,MAAMK,eAAeC,IAAAA,8CAAsB,EAACJ;QAC5C,MAAMK,aAAaC,OAAMC,MAAM;QAC/B,MAAMC,kBAAkBC,IAAAA,sCAAkB;QAC1CC,IAAAA,yCAAyB,EAAC;YACtB,MAAMC,UAAUN,WAAWO,OAAO;YAClC,IAAID,SAAS;gBACT,MAAME,aAAa,OAAOlB,WAAW,aAAaA,OAAOgB,WAAWhB;gBACpE,MAAM,EAAEmB,SAAS,EAAE,GAAGC,SAAS,GAAGF;gBAClC,MAAMG,YAAYC,IAAAA,gBAAO,EAACN,SAASG,WAAW;oBAC1CI,MAAM;oBACN,GAAGH,OAAO;oBACVhB;oBACA,GAAGS,qBAAqB;wBACpBW,UAAU;oBACd,CAAC;gBACL;gBACA,IAAI,CAACH,WAAW;oBACZ;gBACJ;gBACAb,aAAaS,OAAO,GAAGI;gBACvB,OAAO;oBACHA,UAAUI,MAAM;gBACpB;YACJ;QACJ,GAAG;YACCjB;YACAJ;YACAS;SACH;QACD,qBAAOF,OAAMe,YAAY,CAACvB,UAAU;YAChCwB,KAAKC,IAAAA,6BAAa,EAAClB,YAAYJ,MAAMqB,GAAG;QAC5C;IACJ;IACA,OAAO1B;AACX"}